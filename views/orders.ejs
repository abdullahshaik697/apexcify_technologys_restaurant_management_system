<!DOCTYPE html>
<html>
<head>
  <title>Orders</title>
</head>
<body>
  <h1>All Orders</h1>

  <% orders.forEach(order => { %>
    <div style="border:1px solid #ccc; margin:10px; padding:10px;">
      <p><strong>Table:</strong> <%= order.tableNumber.tableNumber %></p>
      <p><strong>Status:</strong> <%= order.status %></p>
      <p><strong>Total:</strong> Rs.<%= order.totalAmount %></p>
      <h4>Items:</h4>
      <ul>
        <% order.items.forEach(i => { %>
          <li><%= i.menuItemId.name %> (x<%= i.quantity %>)</li>
        <% }) %>
      </ul>

      <% if (order.status === "pending") { %>
        <form action="/api/home/orders/serve/<%= order._id %>" method="POST">
          <button type="submit">Mark as Served</button>
        </form>
      <% } %>

      <% if (order.status === "served") { %>
        <form action="/api/home/orders/complete/<%= order._id %>" method="POST">
          <button type="submit">Complete Order</button>
        </form>
      <% } %>
    </div>
  <% }) %>
</body>
</html>
